# ğŸš€ **MohallaMart: A Modern, Local Shop Eâ€‘Commerce Ecosystem**

A fully modernized, more interactive, more readable version of your project specification.

---

## ğŸŒ **Project Overview**

MohallaMart bridges the gap between local commerce and digital convenience through a **multiâ€‘tenant**, **realtime**, **mobileâ€‘first** shopping experience.

Built with **Next.js 15**, **TypeScript**, **Convex realtime backend**, and a refined **design system**, MohallaMart empowers neighborhood shops to operate digitally with seamless delivery, payment, and user engagement capabilities.

---

## ğŸ§° **Tech Stack at a Glance**

### ğŸ¨ **Frontend**

* **Next.js 15.5.3** (App Router + React Server Components)
* **TypeScript** (strict mode)
* **Tailwind CSS 4** with global CSS variables
* **Shadcn UI + Radix Primitives**
* **Zustand** for global state (with persistence)
* **Framer Motion** (strategic use only)
* **Lucide Icons**
* **Fonts**: Open Sans (body) + Montserrat (headings)

### âš™ï¸ **Backend & Database**

* **Convex** (realtime backend + mutations/queries)
* **tRPC** (endâ€‘toâ€‘end typeâ€‘safe APIs)
* **Supabase PostgreSQL** (primary database)
* **Redis** (caching layer)
* **Supabase Auth** (OTP login)

### ğŸ”Œ **External Integrations**

* **Razorpay** (payments)
* **Google Maps API** (location + geocoding)
* **Typesense** (superâ€‘fast search)
* **OneSignal** (push notifications)
* **Twilio/MSG91** (SMS)
* **Convex File Storage** (images/files)
* **Inngest** (jobs & automation)

---

## ğŸ—‚ï¸ **Project Structure**

```
src/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ auth/
â”‚   â”œâ”€â”€ api/
â”‚   â”œâ”€â”€ shopkeeper/
â”‚   â”‚   â”œâ”€â”€ _components/ (ShopkeeperGuard, etc.)
â”‚   â”‚   â”œâ”€â”€ dashboard/
â”‚   â”‚   â”œâ”€â”€ profile/
â”‚   â”‚   â”œâ”€â”€ apply/
â”‚   â”‚   â””â”€â”€ registration/
â”‚   â”œâ”€â”€ admin/
â”‚   â”œâ”€â”€ globals.css
â”‚   â”œâ”€â”€ layout.tsx
â”‚   â””â”€â”€ page.tsx
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ auth/
â”‚   â”œâ”€â”€ sections/
â”‚   â”œâ”€â”€ ui/
â”‚   â”œâ”€â”€ Navbar.tsx
â”‚   â”œâ”€â”€ SearchBar.tsx
â”‚   â”œâ”€â”€ CartSidebar.tsx
â”‚   â”œâ”€â”€ LocationModal.tsx
â”‚   â”œâ”€â”€ ToastProvider.tsx
â”‚   â””â”€â”€ ConvexProvider.tsx
â”œâ”€â”€ hooks/
â”‚   â”œâ”€â”€ useAuth.ts
â”‚   â””â”€â”€ useToast.ts
â”œâ”€â”€ lib/
â”‚   â”œâ”€â”€ supabase.ts
â”‚   â”œâ”€â”€ convex.ts
â”‚   â”œâ”€â”€ trpc.ts
â”‚   â”œâ”€â”€ typesense.ts
â”‚   â”œâ”€â”€ redis.ts
â”‚   â”œâ”€â”€ adminAuth.ts
â”‚   â””â”€â”€ inngest/
â”œâ”€â”€ convex/
â”œâ”€â”€ server/
â””â”€â”€ store/
```

---

## ğŸ’» **Coding Standards**

### ğŸ”· TypeScript

* Strict mode always enabled
* Use `interface` for object shapes
* Use `type` for unions/primitives
* Always type component props + return values
* Typeâ€‘safe custom hooks

### ğŸ”· React Best Practices

* Functional components only
* Client components only when needed (`"use client"`)
* Clean separation of server/client logic
* Memoization for heavy components
* Proper loading, error, and empty states

---

## ğŸ¨ **Styling & Design System**

### Tailwind + CSS Variables

* All colors defined in `globals.css`
* Tailwind reads values from CSS properties

### ğŸ¨ Color Scheme

* **Primary**: Forest Green `--color-primary`
* **Secondary**: Vibrant Orange `--color-secondary`
* **Accent**: Sunny Yellow `--color-accent`
* **Neutral**: Consistent grayscale scale

### Typography

* **Headings**: Montserrat (`--font-montserrat`)
* **Body**: Open Sans (`--font-open-sans`)

### UX Rules

* Mobileâ€‘first layout
* Generous spacing, readable typography
* No inline colors
* Modals (zâ€‘9999), Dropdowns (zâ€‘10000), Navbar (zâ€‘50)

---

## ğŸ§© **Component Principles**

* Reusable + composable components
* Shadcn UI patterns for consistency
* Use Radix primitives for accessibility
* Client/server split for performance
* Clear TypeScript types for props
* Guard components for route protection (e.g., `ShopkeeperGuard`)
* Custom Toast system via `useToast` hook and `ToastProvider`

---

## ğŸ” **Authentication Flow**

* Supabase Auth OTP login (email/phone)
* Convex keeps realtime session sync
* Zustand stores user state (persistent)
* Automatic refresh token handling
* Secure serverâ€‘side admin utilities separate from client

---

## ğŸ›’ **State Management**

* Zustand global store (cart, search, location, user, toasts)
* LocalStorage persistence (cart + user)
* Convex sync for realtime backend updates
* Redis for caching frequent queries
* Toast notifications via Zustand (`useToast` hook)

---

## ğŸ“š **File Naming Conventions**

* Components: `PascalCase`
* Hooks: `useSomething`
* Libraries: camelCase
* Types: PascalCase
* Constants: UPPER_SNAKE_CASE

---

## ğŸ”Œ **API & Services Integration**

* **tRPC** for typeâ€‘safe API calls
* **Convex** for realtime reads/mutations
* **Typesense** for search suggestions, typo tolerance
* **Razorpay** checkout integration
* **Google Maps** for geolocation & distance computation

### Error Handling

* Retry logic
* Graceful UI feedback via custom Toast system (`useToast().error()`)
* Network failure fallbacks
* Never use browser `alert()` - always use `useToast()` for user notifications

---

## âš™ï¸ **Background Jobs (Inngest)**

* 16+ automated job functions
* Email/SMS notifications
* Order lifecycle events
* Automatic retries with exponential backoff
* Debug logging in development

---

## ğŸ“± **Mobile Responsiveness**

* Tailwind responsive utilities
* Touchâ€‘friendly UI
* Optimized image loading
* Tested on 320px â†’ 2560px

---

## ğŸ›¡ï¸ **Security Best Practices**

* Environment variables for secrets
* Serverâ€‘only utilities for admin operations
* Input sanitization
* Token validation on all requests
* HTTPS in production

---

## ğŸš€ **Deployment & Performance**

* Optimized Next.js builds
* Proper caching strategies
* Image optimization with `<Image />`
* Metadata for SEO
* Chunk splitting + lazy loading

---

## ğŸ§© **Common Patterns**

* Custom hooks for logic reuse
* Compound components for complex UIs
* Loading skeletons
* Accessible dropdowns (Shadcn)
* Geolocation via `navigator.geolocation`
* Haversine formula for shop distance filtering
* Route guards for protected pages (`ShopkeeperGuard`, etc.)
* Toast notifications: `const { success, error, warning, info } = useToast();`
* Always wrap protected routes with guard components, never return `null` from guards during loading

---

## ğŸ—ï¸ **High-Level Architecture**

```
Frontend: Next.js + Shadcn + Tailwind + Zustand
Backend: Convex + tRPC
Database: Supabase + Redis
Search: Typesense
Payments: Razorpay
Maps: Google Maps API
Notifications: OneSignal + Twilio
Storage: Convex File Storage
Jobs: Inngest
```

